<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Juan Carlos Villaseñor-Derbez (JC)">

<title>installing_r_rstudio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="01_installing_R_RStudio_files/libs/clipboard/clipboard.min.js"></script>
<script src="01_installing_R_RStudio_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="01_installing_R_RStudio_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="01_installing_R_RStudio_files/libs/quarto-html/popper.min.js"></script>
<script src="01_installing_R_RStudio_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="01_installing_R_RStudio_files/libs/quarto-html/anchor.min.js"></script>
<link href="01_installing_R_RStudio_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="01_installing_R_RStudio_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="01_installing_R_RStudio_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="01_installing_R_RStudio_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="01_installing_R_RStudio_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="01_installing_R_RStudio_files/libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="01_installing_R_RStudio_files/libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="01_installing_R_RStudio_files/libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#r-and-rstudio" id="toc-r-and-rstudio" class="nav-link active" data-scroll-target="#r-and-rstudio">1. R <strong>AND</strong> RStudio?</a></li>
  <li><a href="#installation-instructions" id="toc-installation-instructions" class="nav-link" data-scroll-target="#installation-instructions">2. Installation instructions</a></li>
  <li><a href="#testing-installations" id="toc-testing-installations" class="nav-link" data-scroll-target="#testing-installations">3. Testing installations</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="01_installing_R_RStudio.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<p class="subtitle lead">Installing R and RStudio</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Juan Carlos Villaseñor-Derbez (JC) </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Rosenstiel School of Marine, Atmospheric, and Earth Science and Institute for Data Science and Computing
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
TL;DR:
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use <a href="https://posit.co/download/rstudio-desktop/">this link</a> and use the blue buttons to install R and RStudio in your laptop.</p>
</div>
</div>
<section id="r-and-rstudio" class="level1">
<h1>1. R <strong>AND</strong> RStudio?</h1>
<p>Yes, you’ll need to install two pieces of software because each does different things. Think about R as the car’s engine, and R Studio as the car itself. R takes care of the actual computations. R Studio is an “Integrated Development Environment” (IDE) that allows us to interface with R, as well as to develop projects, connect to external data bases, and visualize our products.</p>
<blockquote class="blockquote">
<p><strong>But I already have R and RStudio in my computer. Should I still do it?</strong></p>
</blockquote>
<p>Yes. I’m glad to hear you already have them. Please make sure you install the latest version of both. The class will flow better if everyone in the classroom has the same versions of R and RStudio.</p>
</section>
<section id="installation-instructions" class="level1">
<h1>2. Installation instructions</h1>
<p>There are two tabs below. One with instructions to install R and one for R Studio. You can always click on an image to make it show in full screen mode.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href="">2.1 Installing R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href="">2.2 Installing RStudio</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p>The first step is to install R on your laptop. It doesn’t matter if you are running Windows, MacOS, or some Linux distro<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, but you will need to have admin privileges. If you own your laptop, then you <em>should</em> have admin privileges.</p>
<section id="macos-and-windows-users" class="level3">
<h3 class="anchored" data-anchor-id="macos-and-windows-users">MacOS and Windows users:</h3>
<ol type="1">
<li>Click on <a href="https://posit.co/download/rstudio-desktop/">this link</a></li>
<li>Under the label “1: Install R” you will see a blue button that says “DOWNLOAD AND INSTALL R”. Click on it.</li>
<li>You’ll be taken to a <a href="https://cran.rstudio.com/">new page</a>. At the top of the page you will see a box with three links. Click the version link that matches your machine.</li>
</ol>
<p><a href="img/1_install_r.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="img/1_install_r.png" class="img-fluid"></a></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">On MacOS</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">On Windows</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<ol start="4" type="1">
<li>Determine which processor (chip) your laptop has by using the spotlight search function (<code>Cmd</code> + <code>Space bar</code>) and type “About this mac”. The screenshot below shows my desktop has the Apple M2 Ultra chip (Apple silicon), while my laptop has an Intel processor (Inter Core i9).</li>
</ol>
<p><img src="img/2_about_this_mac.png" class="img-fluid" style="width:30.0%"><img src="img/2b_about_this_mac.png" class="img-fluid" style="width:28.0%"></p>
<ol start="5" type="1">
<li>Click on the version of R that matches your processor. On my desktop I clicked on <code>R-4.5.1-arm64.pkg</code>.</li>
</ol>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<ol start="4" type="1">
<li>You will be given four options (see figure). Click on the one that says <code>base</code></li>
</ol>
<p><a href="img/3_windows.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="img/3_windows.png" class="img-fluid"></a></p>
<ol start="5" type="1">
<li>You will be taken to a new page. Click on the download link at the top, which says “Download R-44.5.1 for Windows”. A file called <code>R-4.5.1-win.exe</code> will download.</li>
</ol>
</div>
</div>
</div>
<ol start="6" type="1">
<li>(Optional) You might be prompted to save it in a desired location. Place it in your Downloads or Desktop folder, it doesn’t really matter.</li>
<li>Navigate to the folder where it was downloaded and double-click on it. If you were not prompted to select a location, the file is likely under your Downloads folder.</li>
<li>Follow the installation instructions (basically, click continue until you are done). A screenshot of the installer on MacOS is below. The Windows one will look similar.</li>
</ol>
<p><a href="img/4_R_installer.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="img/4_R_installer.png" class="img-fluid" style="width:50.0%"></a></p>
<ol start="9" type="1">
<li>You are done! Now proceed to installing R Studio</li>
</ol>
</section>
<section id="linux-users" class="level3">
<h3 class="anchored" data-anchor-id="linux-users">Linux users:</h3>
<p>The above instructions also work because you can install precompiled binay distributions. If you prefer to do it yourself, here are some resources depending on your distro:</p>
<ul>
<li>Ubuntu instructions are <a href="https://cran.r-project.org/bin/linux/ubuntu/fullREADME.html">here</a>.</li>
<li>Fedora, CentOS, and RHEL instructions are <a href="https://cran.r-project.org/bin/linux/fedora/">here</a></li>
<li>Debian instructions are <a href="https://cran.r-project.org/bin/linux/debian/">here</a></li>
<li>Redhat instructions are <a href="https://cran.r-project.org/bin/linux/redhat/">here</a></li>
</ul>
</section>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Do not attempt to install RStudio if you have not installed R!</p>
</div>
</div>
<ol type="1">
<li>Click on <a href="https://posit.co/download/rstudio-desktop/">this link</a></li>
<li>Under the label “2: Install RStudio” you will se a blue button that says “DOWNLOAD RSTUDIO DESKTOP FOR …”. Click on it.</li>
<li>A file will download.</li>
<li>(Optional) You might be prompted to save it in a desired location. Place it in your Downloads or Desktop folder, it doesn’t really matter.</li>
<li>Navigate to the folder where it was downloaded and double-click on it. If you were not prompted to select a location, the file is likely under your Downloads folder.</li>
</ol>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">On MacOS</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">On Windows</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<ol start="6" type="1">
<li>A window will pop up. Drag and drop the RStudio Icon into the Applications folder.</li>
</ol>
<p><a href="img/5_RStudio_installer.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="img/5_RStudio_installer.png" class="img-fluid" style="width:75.0%"></a></p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<ol start="6" type="1">
<li>Follow the installation instructions (basically, click continue until you are done).</li>
</ol>
</div>
</div>
</div>
<ol start="7" type="1">
<li>You are done!</li>
</ol>
</div>
</div>
</div>
<hr>
</section>
<section id="testing-installations" class="level1">
<h1>3. Testing installations</h1>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Do not attempt to test installations until you have installed R <strong>AND</strong> RStudio! Go back up and make sure you’ve gone through <strong>both</strong> sets of instructions under sections <code>2.1</code> and <code>2.2</code>.</p>
</div>
</div>
<ol type="1">
<li>Open RStudio.</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>I said “Open RStudio” not “Open R”. The RStudio logo looks like this: <img src="img/6_RStudio_logo.png" class="img-fluid" style="width:5.0%">, while the R logo looks like this: <img src="img/7_R_logo.png" class="img-fluid" style="width:5.0%">. Use the first one.</p>
</div>
</div>
<ol start="2" type="1">
<li>You should see something like what’s shown on the screenshopt below. Yours might look a bit different, but you <strong>should see three or four main windows</strong>.</li>
</ol>
<p><a href="img/8_RStudio.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="img/8_RStudio.png" class="img-fluid"></a></p>
<ol start="3" type="1">
<li>If you got here, you are ready to go. See you in class! If you see something like the screenshot below, you opened R, not RStudio. Try again.</li>
</ol>
<p><a href="img/9_R.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="img/9_R.png" class="img-fluid" style="width:50.0%"></a></p>
<ol start="4" type="1">
<li>If you have not been able to install or confirm installation, come meet me <em>before</em> class.</li>
</ol>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>If you are using Linux, I assume you know what you are doing and you’ll be able to install R using whatever package manager you prefer.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>